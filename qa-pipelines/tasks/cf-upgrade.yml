---
platform: linux
image_resource:
  type: docker-image
  source:
    repository: splatform/cf-ci-orchestration
    tag: latest
inputs:
- name: ci
- name: meta
- name: s3.scf-config
- name: pool.kube-hosts
- name: commit-id
outputs:
- name: klog
params:
  KUBE_REGISTRY_HOSTNAME: ""
  KUBE_ORGANIZATION: ""
  HA: false # true, false, or "scaled"
  MAGIC_DNS_SERVICE: xip.io
  AZ_SP_APPID: ""
  AZ_SP_PASSWORD: ""
  AZ_SP_TENANT: ""
  AWS_ACCESS_KEY_ID: ""
  AWS_SECRET_ACCESS_KEY: ""
  GKE_PRIVATE_KEY_BASE64: ""
  KLOG_COLLECTION_ON_FAILURE: false
  EMBEDDED_UAA: false
  ENABLE_CREDHUB: true
  ENABLE_AUTOSCALER: true
  UAA_EXTERNAL_DB: false
  UAA_EXTERNAL_DB_HOST: ~
  UAA_EXTERNAL_DB_PORT: ~
  UAA_EXTERNAL_DB_USER: ~
  UAA_EXTERNAL_DB_PASS: ~
  UAA_EXTERNAL_DB_SSL: false
  UAA_EXTERNAL_DB_USER_HOST_SUFFIX: ~
  UAA_EXTERNAL_DB_VALIDATION: "disabled"
  SCF_EXTERNAL_DB: false
  SCF_EXTERNAL_DB_HOST: ~
  SCF_EXTERNAL_DB_PORT: ~
  SCF_EXTERNAL_DB_USER: ~
  SCF_EXTERNAL_DB_PASS: ~
  SCF_EXTERNAL_DB_SSL: false
  SCF_EXTERNAL_DB_USER_HOST_SUFFIX: ~
  HA_STRICT: "" # set to true or false when testing HA_strict

run:
  path: ci/qa-pipelines/tasks/cf-upgrade.sh
